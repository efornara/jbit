;
; xv65.inc
;

;
; Copyright (C) 2012-2017  Emanuele Fornara
; All rights reserved.
;
; Redistribution and use in source and binary forms, with or without
; modification, are permitted provided that the following conditions
; are met:
;  * Redistributions of source code must retain the above copyright
;    notice, this list of conditions and the following disclaimer.
;  * Redistributions in binary form must reproduce the above copyright
;    notice, this list of conditions and the following disclaimer in
;    the documentation and/or other materials provided with the
;    distribution.
;
; THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
; "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
; LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
; FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
; COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
; INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
; BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
; OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
; AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
; OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
; OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
; SUCH DAMAGE.
;

PUTCHAR = $0200

REQPUT = $0201
REQEND = $0202
REQRES = $0203

REQPTRLO = $0204
REQPTRHI = $0205

FRMFPS = $0211
FRMDRAW = $0212
GETCHAR = $0213
GETEOF = $0214
TTYCTL = $0215
PUTUINT8 = $0216
RANDOM = $0217
KEYBUF = $0218

CONCOLS = $0220
CONROWS = $0221
CONESC = $0227
CONVIDEO = $0228
CONROW0 = $0228
CONROW1 = $0232
CONROW2 = $023C
CONROW3 = $0246

REQERRNO = $0250
PIDSIZE = $0251
TRCLEVEL = $0252
ERREXIT = $0253
REDIRPUT = $0254

REQDAT = $0260
REQDAT2 = $0268

REQ_FORK   =  1
REQ_EXIT   =  2
REQ_WAIT   =  3
REQ_PIPE   =  4
REQ_READ   =  5
REQ_KILL   =  6
REQ_EXEC   =  7
REQ_FSTAT  =  8
REQ_CHDIR  =  9
REQ_DUP    = 10
REQ_GETPID = 11
;REQ_SBRK   = 12
REQ_SLEEP  = 13
;REQ_UPTIME = 14
REQ_OPEN   = 15
REQ_WRITE  = 16
;REQ_MKNOD  = 17
REQ_UNLINK = 18
;REQ_LINK   = 19
REQ_MKDIR  = 20
REQ_CLOSE  = 21

REQ_ARGC   = 32
REQ_ARGV   = 33
REQ_ENV    = 34

REQ_TIME   = 48
REQ_RMDIR  = 49
REQ_LSEEK  = 50

TTY_ICANON     =   1
TTY_MICROIO    =   2
TTY_RAW        =   3
TTY_MODEMASK   =   7
TTY_WAKEUP     =  32
TTY_ISDIRTY    =  64
TTY_CANREAD    = 128

ESC_HOME       =   1
ESC_CLEAR      =   2
ESC_NORMAL     =   3
ESC_CSI        =   4

ESC_FG_BLACK   =  30
ESC_FG_RED     =  31
ESC_FG_GREEN   =  32
ESC_FG_YELLOW  =  33
ESC_FG_BLUE    =  34
ESC_FG_MAGENTA =  35
ESC_FG_CYAN    =  36
ESC_FG_WHITE   =  37

ESC_BG_BLACK   =  40
ESC_BG_RED     =  41
ESC_BG_GREEN   =  42
ESC_BG_YELLOW  =  43
ESC_BG_BLUE    =  44
ESC_BG_MAGENTA =  45
ESC_BG_CYAN    =  46
ESC_BG_WHITE   =  47

; STANDARD SYMBOLS

SIGHUP   = 1
SIGINT   = 2
SIGQUIT  = 3
SIGILL   = 4
SIGABRT  = 6
SIGFPE   = 8
SIGKILL  = 9
SIGSEGV = 11
SIGPIPE = 13
SIGALRM = 14
SIGTERM = 15

EPERM   =  1
ENOENT  =  2
ESRCH   =  3
EINTR   =  4
EIO     =  5
ENXIO   =  6
E2BIG   =  7
ENOEXEC =  8
EBADF   =  9
ECHILD  = 10
EAGAIN  = 11
ENOMEM  = 12
EACCES  = 13
EFAULT  = 14
ENOTBLK = 15
EBUSY   = 16
EEXIST  = 17
EXDEV   = 18
ENODEV  = 19
ENOTDIR = 20
EISDIR  = 21
EINVAL  = 22
ENFILE  = 23
EMFILE  = 24
ENOTTY  = 25
ETXTBSY = 26
EFBIG   = 27
ENOSPC  = 28
ESPIPE  = 29
EROFS   = 30
EMLINK  = 31
EPIPE   = 32
EDOM    = 33
ERANGE  = 34

O_RDONLY =   1
O_WRONLY =   2
O_RDWR   =   3
O_CREAT  =  16
O_TRUNC  =  32
O_APPEND =  64
O_EXCL   = 128

T_BLK  =  1
T_CHR  =  2
T_DIR  =  4
T_FIFO =  8
T_LNK  = 16
T_REG  = 32
T_SOCK = 64

SEEK_SET = 0
SEEK_CUR = 1
SEEK_END = 2

; ASM ONLY

IO = $0200

.macro  req
@_req_: .word @_endreq_ - @_req_ - 2
.endmacro

.macro  endreq
@_endreq_:
.endmacro
